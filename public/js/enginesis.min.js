!function(e){"use strict";const n={VERSION:"2.11.2",debugging:!0,disabled:!1,isOnline:!0,isPaused:!1,errorLevel:15,useHTTPS:!0,serverStage:null,serverHost:null,siteResources:{serviceURL:null,avatarImageURL:null,assetUploadURL:null},siteId:0,gameId:0,gameKey:"",gameGroupId:0,languageCode:"en",internalStateSeq:0,lastResponse:null,callBackFunction:null,authToken:null,authTokenWasValidated:!1,authTokenExpires:null,refreshToken:null,refreshTokenExpires:null,sessionId:null,sessionExpires:null,developerKey:null,loggedInUserInfo:{},networkId:1,platform:"",locale:"en-US",isUserLoggedIn:!1,isNativeBuild:!1,isBrowserBuild:"undefined"!=typeof window&&null!==window&&void 0!==window.document&&void 0!==window.location,isNodeBuild:"undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,isTouchDeviceFlag:!1,SESSION_COOKIE:"engsession",SESSION_USERINFO:"engsession_user",refreshTokenStorageKey:"engrefreshtoken",captchaId:"99999",captchaResponse:"DEADMAN",anonymousUserKey:"enginesisAnonymousUser",anonymousUser:null,serviceQueue:[],serviceQueueSaveKey:"enginesisServiceQueue",serviceQueueRestored:0,assetUploadQueue:null,nodeRequest:null,gameInfo:null,favoriteGames:new Set,favoriteGamesNextCheck:0,supportedNetworks:{Enginesis:1,Facebook:2,Google:7,Twitter:11,Apple:14}};let t=null;function s(e,t){n.debugging&&(null==t&&(t=15),(n.errorLevel&t)>0&&console.log(e),9==t&&alert(e))}function r(){return n.siteId>0&&n.developerKey.length>0&&n.siteResources.serviceURL.length>0}function o(e){return null==e||!1===e||"string"==typeof e&&(""===e||"undefined"===e)||Array.isArray(e)&&0==e.length||"number"==typeof e&&(isNaN(e)||0===e)}function i(e){return null==e}function a(e){return"string"==typeof e?"1"===(e=e.toLowerCase())||"true"===e||"t"===e||"checked"===e||"yes"===e||"y"===e:!0===e||1===e}function u(){const e=arguments.length;let n;if(0==e)n=null;else if(1==e)n=arguments[0];else{for(var t=0;t<e;t++)if(!o(arguments[t])){n=arguments[t];break}void 0===n&&(n=arguments[e-1])}return n}function d(){const e=arguments.length;let n;if(0==e)n=null;else if(1==e)n=arguments[0];else{for(var t=0;t<e;t++)if(!i(arguments[t])){n=arguments[t];break}void 0===n&&(n=arguments[e-1])}return n}function c(e,n){null!=e&&null!=n&&"undefined"!=typeof window&&void 0!==window.localStorage&&(window.localStorage[e]=JSON.stringify(n))}function l(e){null!=e&&"undefined"!=typeof window&&void 0!==window.localStorage&&window.localStorage.removeItem(e)}function f(e){let n=null;if(null!=e&&"undefined"!=typeof window&&void 0!==window.localStorage){const t=window.localStorage[e];null!=t&&(n=JSON.parse(t))}return n}function g(e){return e&&e.results&&e.results.status&&"1"==e.results.status.success}function m(e){return e&&e.results&&e.results.status?e.results.status.message:"INVALID_PARAMETER"}function _(e,n,t){const s={state_seq:0,fn:"unknown",...t};return{fn:s.fn,results:{passthru:s,result:[],status:{success:""==e||"NO_ERROR"==e?"1":"0",message:e,extended_info:n}}}}function p(e,t,r){let o;C(e);try{o="string"==typeof t?JSON.parse(t):t}catch(n){o=V("unknown",e,"SERVICE_ERROR","Error: "+n.message+"; "+t.toString(),{}),s("Enginesis requestComplete exception "+JSON.stringify(o))}o.fn=o.results.passthru.fn,n.lastResponse=o,"function"==typeof r?r(o):"function"==typeof n.callBackFunction&&n.callBackFunction(o)}function h(e){return new Promise((function(n){var r=e.fn;if(function(e){return e&&e.results&&e.results.status&&"0"==e.results.status.success&&"TOKEN_EXPIRED"==e.results.status.message}(e))(function(e){return new Promise((function(n){null!==te()?t.sessionRefresh(te(),null).then((function(t){B(e.results.passthru.fn,e.results.passthru,null).then((function(e){n(e)}),(function(t){s("refreshTokenAndReissueRequest refresh error "+t.toString()),n(e)})).catch((function(t){s("refreshTokenAndReissueRequest refresh exception "+t.toString()),n(e)}))}),(function(t){s("refreshTokenAndReissueRequest refresh error "+t.toString()),n(e)})).catch((function(t){s("refreshTokenAndReissueRequest refresh exception "+t.toString()),n(e)})):n(e)}))})(e).then((function(e){n(e)}));else if(g(e)&&r){var o={SessionBegin:S,SessionRefresh:y,UserLogin:k,UserLogout:L,GameGet:U,UserFavoriteGamesList:w,UserFavoriteGamesAssign:w,UserFavoriteGamesAssignList:w,UserFavoriteGamesUnassign:w,UserFavoriteGamesUnassignList:w}[r];i(o)||o(e)}n(e)}))}function v(e){return(new TextEncoder).encode(e)}function I(e){function n(e,n){return e<<n|e>>>32-n}function t(e,n){var t,s,r,o,i;return r=2147483648&e,o=2147483648&n,i=(1073741823&e)+(1073741823&n),(t=1073741824&e)&(s=1073741824&n)?2147483648^i^r^o:t|s?1073741824&i?3221225472^i^r^o:1073741824^i^r^o:i^r^o}function s(e,s,r,o,i,a,u){return e=t(e,t(t(function(e,n,t){return e&n|~e&t}(s,r,o),i),u)),t(n(e,a),s)}function r(e,s,r,o,i,a,u){return e=t(e,t(t(function(e,n,t){return e&t|n&~t}(s,r,o),i),u)),t(n(e,a),s)}function o(e,s,r,o,i,a,u){return e=t(e,t(t(function(e,n,t){return e^n^t}(s,r,o),i),u)),t(n(e,a),s)}function i(e,s,r,o,i,a,u){return e=t(e,t(t(function(e,n,t){return n^(e|~t)}(s,r,o),i),u)),t(n(e,a),s)}function a(e){var n,t="",s="";for(n=0;n<=3;n++)t+=(s="0"+(e>>>8*n&255).toString(16)).substring(s.length-2);return t}var u,d,c,l,f,g,m,_,p,h;for(u=function(e){for(var n,t=e.length,s=t+8,r=16*((s-s%64)/64+1),o=Array(r-1),i=0,a=0;a<t;)i=a%4*8,o[n=(a-a%4)/4]=o[n]|e.charCodeAt(a)<<i,a++;return i=a%4*8,o[n=(a-a%4)/4]=o[n]|128<<i,o[r-2]=t<<3,o[r-1]=t>>>29,o}(e=function(e){e=e.replace(/rn/g,"n");for(var n="",t=0;t<e.length;t++){var s=e.charCodeAt(t);s<128?n+=String.fromCharCode(s):s>127&&s<2048?(n+=String.fromCharCode(s>>6|192),n+=String.fromCharCode(63&s|128)):(n+=String.fromCharCode(s>>12|224),n+=String.fromCharCode(s>>6&63|128),n+=String.fromCharCode(63&s|128))}return n}(e)),m=1732584193,_=4023233417,p=2562383102,h=271733878,d=0;d<u.length;d+=16)c=m,l=_,f=p,g=h,m=s(m,_,p,h,u[d+0],7,3614090360),h=s(h,m,_,p,u[d+1],12,3905402710),p=s(p,h,m,_,u[d+2],17,606105819),_=s(_,p,h,m,u[d+3],22,3250441966),m=s(m,_,p,h,u[d+4],7,4118548399),h=s(h,m,_,p,u[d+5],12,1200080426),p=s(p,h,m,_,u[d+6],17,2821735955),_=s(_,p,h,m,u[d+7],22,4249261313),m=s(m,_,p,h,u[d+8],7,1770035416),h=s(h,m,_,p,u[d+9],12,2336552879),p=s(p,h,m,_,u[d+10],17,4294925233),_=s(_,p,h,m,u[d+11],22,2304563134),m=s(m,_,p,h,u[d+12],7,1804603682),h=s(h,m,_,p,u[d+13],12,4254626195),p=s(p,h,m,_,u[d+14],17,2792965006),m=r(m,_=s(_,p,h,m,u[d+15],22,1236535329),p,h,u[d+1],5,4129170786),h=r(h,m,_,p,u[d+6],9,3225465664),p=r(p,h,m,_,u[d+11],14,643717713),_=r(_,p,h,m,u[d+0],20,3921069994),m=r(m,_,p,h,u[d+5],5,3593408605),h=r(h,m,_,p,u[d+10],9,38016083),p=r(p,h,m,_,u[d+15],14,3634488961),_=r(_,p,h,m,u[d+4],20,3889429448),m=r(m,_,p,h,u[d+9],5,568446438),h=r(h,m,_,p,u[d+14],9,3275163606),p=r(p,h,m,_,u[d+3],14,4107603335),_=r(_,p,h,m,u[d+8],20,1163531501),m=r(m,_,p,h,u[d+13],5,2850285829),h=r(h,m,_,p,u[d+2],9,4243563512),p=r(p,h,m,_,u[d+7],14,1735328473),m=o(m,_=r(_,p,h,m,u[d+12],20,2368359562),p,h,u[d+5],4,4294588738),h=o(h,m,_,p,u[d+8],11,2272392833),p=o(p,h,m,_,u[d+11],16,1839030562),_=o(_,p,h,m,u[d+14],23,4259657740),m=o(m,_,p,h,u[d+1],4,2763975236),h=o(h,m,_,p,u[d+4],11,1272893353),p=o(p,h,m,_,u[d+7],16,4139469664),_=o(_,p,h,m,u[d+10],23,3200236656),m=o(m,_,p,h,u[d+13],4,681279174),h=o(h,m,_,p,u[d+0],11,3936430074),p=o(p,h,m,_,u[d+3],16,3572445317),_=o(_,p,h,m,u[d+6],23,76029189),m=o(m,_,p,h,u[d+9],4,3654602809),h=o(h,m,_,p,u[d+12],11,3873151461),p=o(p,h,m,_,u[d+15],16,530742520),m=i(m,_=o(_,p,h,m,u[d+2],23,3299628645),p,h,u[d+0],6,4096336452),h=i(h,m,_,p,u[d+7],10,1126891415),p=i(p,h,m,_,u[d+14],15,2878612391),_=i(_,p,h,m,u[d+5],21,4237533241),m=i(m,_,p,h,u[d+12],6,1700485571),h=i(h,m,_,p,u[d+3],10,2399980690),p=i(p,h,m,_,u[d+10],15,4293915773),_=i(_,p,h,m,u[d+1],21,2240044497),m=i(m,_,p,h,u[d+8],6,1873313359),h=i(h,m,_,p,u[d+15],10,4264355552),p=i(p,h,m,_,u[d+6],15,2734768916),_=i(_,p,h,m,u[d+13],21,1309151649),m=i(m,_,p,h,u[d+4],6,4149444226),h=i(h,m,_,p,u[d+11],10,3174756917),p=i(p,h,m,_,u[d+2],15,718787259),_=i(_,p,h,m,u[d+9],21,3951481745),m=t(m,c),_=t(_,l),p=t(p,f),h=t(h,g);return(a(m)+a(_)+a(p)+a(h)).toLowerCase()}function y(e){let n=!1;if(e&&e.results&&e.results.result){const t=e.results.result[0];O(t.cr,t)||s("refreshSessionInfo hash does not match. From server: "+t.cr+". Computed here: "+N()),n=X(t)}else{const n=m(e);"INVALID_PARAMETER"!=n&&"INVALID_TOKEN"!=n||Y()}return n}function U(e){e.results.result.row?n.gameInfo=e.results.result.row:n.gameInfo=e.results.result[0],a(n.gameInfo.is_favorite)&&n.favoriteGames.add(parseInt(n.gameInfo.game_id,10))}function w(e){var t=e.results.result;n.favoriteGames.clear();for(var s=0;s<t.length;s++)n.favoriteGames.add(parseInt(t[s].game_id,10))}function R(){return new Date(Date.now()+864e5).toISOString().slice(0,19).replace("T"," ")}function S(e){const s=e.results.result[0];O(s.cr,null)&&(U(e),s.authToken||s.authtok?X(s):(n.sessionId=s.session_id,n.sessionExpires=R(),s.site_mark&&s.site_mark!=n.anonymousUser.userId&&(n.anonymousUser.userId=s.site_mark,oe())),a(s.tokenExpired)&&!o(n.refreshToken)&&t.sessionRefresh(n.refreshToken,null)),n.siteResources.baseURL=s.siteBaseUrl||"",n.siteResources.profileURL=s.profileUrl||"",n.siteResources.loginURL=s.loginUrl||"",n.siteResources.registerURL=s.registerUrl||"",n.siteResources.forgotPasswordURL=s.forgotPasswordUrl||"",n.siteResources.playURL=s.playUrl||"",n.siteResources.privacyURL=s.privacyUrl||"",n.siteResources.termsURL=s.termsUrl||""}function E(){n.loggedInUserInfo={},n.networkId=1,n.sessionId=null,n.sessionExpires=null,n.authToken=null,n.authTokenWasValidated=!1,n.authTokenExpires=null,n.refreshToken=null,n.refreshTokenExpires=null}function k(e){let t=!1;if(e&&e.results&&e.results.result){const r=e.results.result[0];O(r.cr,r)||s("updateLoggedInUserInfo hash does not match. From server: "+r.cr+". Computed here: "+N(r)),ne(r.refresh_token),n.loggedInUserInfo=r,n.isUserLoggedIn=Math.floor(r.user_id)>0,n.networkId=r.network_id,t=X(r)}return t}function L(e){e&&e.results&&e.results.result&&(E(),Y())}function T(){return Math.floor(Date.now()/1728e5)}function G(e){const t=n.loggedInUserInfo||{};e=e||{};let s={siteId:n.siteId,userId:d(e.userId,e.user_id,t.user_id,0),userName:u(e.userName,e.user_name,t.user_name,""),accessLevel:d(e.accessLevel,e.access_level,t.access_level,10),siteUserId:u(e.siteUserId,e.site_user_id,t.site_user_id,""),networkId:d(e.networkId,e.network_id,t.network_id,1),gameId:e.gameId||n.gameId,dayStamp:e.dayStamp||T(),siteMark:0};return 0==s.userId&&i(e.siteMark)&&n.anonymousUser&&(s.siteMark=n.anonymousUser.userId),s}function N(e){const t=G(e);return I(`s=${t.siteId}&u=${t.userId}&d=${t.dayStamp}&n=${t.userName}&g=${t.gameId}&i=${t.siteUserId}&w=${t.networkId}&l=${t.accessLevel}&m=${t.siteMark}&k=${n.developerKey}`)}function O(e,n){const r=G(n);let o=e==N(r);return o||(r.dayStamp=T(),o=e==N(r),o&&(s("sessionVerifyHash Session expired but we think we can refresh it."),t.sessionRefresh(te(),null).then((function(e){s("sessionVerifyHash users authentication has been refreshed. "+e.toString())}),(function(e){s("sessionVerifyHash refresh error "+e.toString())})).catch((function(e){s("sessionVerifyHash refresh exception "+e.toString())})))),o||s("sessionVerifyHash hash does not match. From server: "+e+". Computed here: "+N(r)+" from "+JSON.stringify(r)),o}function b(e,n,t,s){h(e).then((function(e){null!=t?t(e):null!=s&&s(e),null!=n&&n(e)}))}function C(e){var t=0,s=n.serviceQueue;return null!=s&&s.length>0&&(s=s.filter((function(n){var s=n.state_seq==e;return s&&(n.state_status=2,t++),!s})),n.serviceQueue=s),n.serviceQueueRestored>0&&t>0&&(n.serviceQueueRestored-=t,x()),t}function x(){return c(n.serviceQueueSaveKey,n.serviceQueue),!0}function A(){var e=f(n.serviceQueueSaveKey);return null==e?(e=[],n.serviceQueueRestored=0):(c(n.serviceQueueSaveKey,[]),n.serviceQueueRestored=n.serviceQueue.length),n.serviceQueue=e,function(){var e,t=n.serviceQueue;if(null!=t&&t.length>0)for(e=0;e<t.length;e++)t[e].state_status=0}(),n.serviceQueueRestored>0}function P(e){var t=Object.assign({Accept:"application/json","X-DeveloperKey":n.developerKey},e);return n.authTokenWasValidated&&(t.Authentication="Bearer "+n.authToken),t}function F(e,t){if(n.isOnline&&n.serviceQueue.length>0){const r=function(){var e,t,s=n.serviceQueue,r=null;for(t=0;t<s.length;t++)if(void 0===(e=s[t]).state_status||0==e.state_status){e.state_status=1,r=e;break}return r}();if(null!=r){const t=r.fn,o=r.overRideCallBackFunction;let i;n.isNodeBuild?function(e,t,r){if(null==n.nodeRequest){if("undefined"==typeof window||void 0===window.fetch)throw new Error("enginesis.nodeRequest is not set in the node.js environment");n.nodeRequest=window.fetch}n.nodeRequest(n.siteResources.serviceURL,{method:"POST",headers:P(),body:new URLSearchParams(t)}).then((async function(s){if(200!=s.status){let o="Service error "+s.status+" from "+n.siteResources.serviceURL;p(t.state_seq,D(e,t.state_seq,"OFFLINE",o,t),r)}else{let e;e=void 0===t.response||"json"==t.response?await s.json():s.body,p(t.state_seq,e,r)}})).catch((function(o){const i="Internal error posting to "+n.siteResources.serviceURL+": "+o.toString();s(i),p(t.state_seq,D(e,t.state_seq,"OFFLINE",i,t),r)}))}(t,r,(function(t){b(t,e,o,n.callBackFunction)})):fetch(n.siteResources.serviceURL,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:P(),body:K(r)}).then((function(i){if(C(r.state_seq),200==i.status)i.json().then((function(a){let u;if(null==a){var d=i.text();s("Enginesis service error for "+t+": "+d),u="Enginesis service while contacting Enginesis at "+n.serverHost+" for "+t,a=V(t,r.state_seq,"SERVICE_ERROR",u,r)}else a.fn=t;b(a,e,o,n.callBackFunction)})).catch((function(i){const a="Invalid response from Enginesis at "+n.serverHost+" for "+t+": "+i.toString(),u=V(t,r.state_seq,"SERVICE_ERROR",a,r);s(a),b(u,e,o,n.callBackFunction)}));else{const a="Network error "+i.status+" while contacting Enginesis at "+n.serverHost+" for "+t,u=V(t,r.state_seq,"SERVICE_ERROR",a,r);s(a),b(u,e,o,n.callBackFunction)}}),(function(a){i=H()?"Enginesis Network error encountered, assuming we're offline. "+n.serverHost+" for "+t+": "+a.toString():"Enginesis is already offline, leaving this message on the queue.",s(i),b(V(t,r.state_seq,"OFFLINE",i,r),e,o,n.callBackFunction)})).catch((function(a){i=H()?"Enginesis Network error encountered, assuming we're offline. "+n.serverHost+" for "+t+": "+a.toString():"Enginesis is already offline, leaving this message on the queue.",s(i),b(V(t,r.state_seq,"OFFLINE",i,r),e,o,n.callBackFunction)}))}else null!=t&&t(new Error("Queue is empty"))}else null!=t&&t(new Error("Offline or queue is empty"))}function B(e,t,o){return new Promise((function(i,a){if(!n.disabled&&r()){const r=function(e,t){n.internalStateSeq+=1;var s={fn:e,language_code:n.languageCode,site_id:n.siteId,state_seq:n.internalStateSeq,state_status:0,response:"json"};n.loggedInUserInfo&&n.authTokenWasValidated&&0!=Math.floor(n.loggedInUserInfo.user_id)&&(s.authtok=n.authToken,"SessionRefresh"==e&&(s.logged_in_user_id=n.loggedInUserInfo.user_id));n.gameId&&(s.game_id=n.gameId);if(null!=t)for(var r in t)t.hasOwnProperty(r)&&(s[r]=t[r]);return s}(e,t);if(r.overRideCallBackFunction=o,n.serviceQueue.push(r),n.isOnline)F(i,a);else{const a="Enginesis is offline. Message "+e+" will be processed when network connectivity is restored.",u=V(e,r.state_seq,"OFFLINE",a,t);x(),s(a),b(u,i,o,n.callBackFunction)}}else{let s;s=n.disabled?V(e,0,"DISABLED","Enginesis is disabled.",t):V(e,0,"VALIDATION_FAILED","Enginesis internal state failed validation.",t),b(s,i,o,n.callBackFunction)}}))}function q(e,t,s,r,o){return new Promise((function(i){b(V(e,t.state_seq||0,s,r,t),i,o,n.callBackFunction)}))}function D(e,n,t,s,r){return JSON.stringify(V(e,n,t,s,r))}function V(e,n,t,s,r){null!=e&&""!=e||(e="unknown"),void 0!==n&&null!=n||(n=0),void 0!==r&&null!=r||(r={}),void 0!==r.fn&&null!=r.fn||(r.fn=e),void 0!==r.state_seq&&null!=r.state_seq||(r.state_seq=n);return{fn:e,results:{result:[],status:{success:!(""==t||"NO_ERROR"==t)?"0":"1",message:t,extended_info:s},passthru:r}}}function K(e){var t,s;for(t in s=n.isBrowserBuild?new FormData:{},e)e.hasOwnProperty(t)&&"function"!=typeof e[t]&&"overRideCallBackFunction"!=t&&(n.isBrowserBuild?s.append(t,e[t]):s[t]=e[t]);return s}function H(){var e;return n.isOnline?(x(),e=!0):e=!1,n.isOnline=!1,e}function M(){n.isOnline;function e(t){n.isOnline&&n.serviceQueue.length>0?F((function(){e(t)}),(function(){e(t)})):t()}return n.isOnline=!0,A(),new Promise((function(n){e(n)}))}function Q(){return n.useHTTPS?"https://":"http://"}function z(e){var t,s=n.isBrowserBuild?window.location.host:"enginesis-l.com",r=!1;switch(n.serverHost=null,null==e&&(e="*"),e){case"":case"-l":case"-d":case"-q":case"-x":n.serverStage=e;break;case"*":"localhost"==s.substring(0,9)?(e="-l",r=!0):e=null!=(t=/-[ldqx]\./.exec(s))&&t.index>0?s.substring(t.index,t.index+2):"",n.serverStage=e;break;default:null!=(t=/-[ldqx]\./.exec(e))&&t.index>0?n.serverStage=e.substring(t.index,t.index+2):n.serverStage="",n.serverHost=e}if(null===n.serverHost){var o,i="enginesis",a=s.split("."),u=a.length;u>1?(o=a[u-2].replace(/-[ldqx]$/,""),n.serverHost=o!=i?i+".":"",n.serverHost+=o+n.serverStage+"."+a[u-1]):n.serverHost=r?"enginesis-l.com":s}return n.siteResources.serviceURL=Q()+n.serverHost+"/index.php",n.siteResources.avatarImageURL=Q()+n.serverHost+"/avatar/index.php",n.siteResources.assetUploadURL=Q()+n.serverHost+"/procs/asset.php",n.serverStage}function $(){var e;n.isBrowserBuild?(n.platform="browser",n.locale=navigator.language,n.isNativeBuild="file:"==window.location.protocol,n.isTouchDeviceFlag=(e=!1,n.isBrowserBuild&&("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&(e=!0),e)):(n.platform="nodejs",n.locale="en",n.isNativeBuild=!0,n.isTouchDeviceFlag=!1)}function j(e){const t=/([^&=]+)=?([^&]*)/g;let s,r,o={};function i(e){return decodeURIComponent(e.replace(/\+/g," "))}if(!e&&n.isBrowserBuild)r=window.location.search.substring(1);else{if(!e)return o;r=e}for("?"==r[0]&&(r=r.substring(1));null!=(s=t.exec(r));)o[i(s[1])]=i(s[2]);return o}function J(e){return"undefined"!=typeof window&&e&&decodeURIComponent(window.document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null}function W(e,n,t,s,r,o){var i,a,u;if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;if(null==n)u="; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(r?"; domain="+r:"")+(s?"; path="+s:"");else{if(i="",a="expires=Fri, 31 Dec 9999 23:59:59 GMT","SameSite=LAX",void 0===o&&(o=!0),"object"==typeof n&&(n=JSON.stringify(n)),t)switch(t.constructor){case Number:i=t===1/0?a:"; max-age="+t;break;case String:i="expires="+t;break;case Date:i="expires="+t.toUTCString();break;default:i=a}else i=a;u=encodeURIComponent(n)+"; "+i+"; "+(r?"domain="+r+"; ":"")+(s?"path="+s+"; ":"")+"SameSite=LAX; "+(o?"Secure;":"")}return"undefined"==typeof window||void 0===window.document?u:(window.document.cookie=encodeURIComponent(e)+"="+u,!0)}function Y(){l(n.SESSION_USERINFO),l(n.refreshTokenStorageKey),W(n.SESSION_USERINFO,null,0,"/","",!0),E()}function X(e){let t;if(e){if(t=O(e.cr,null),!t){const t=N(n.loggedInUserInfo);s("Possible payload compromise: provided hash "+e.cr+" does not match computer here "+t)}t=!0,n.sessionId=e.session_id,n.sessionExpires=R(),n.authToken=e.authToken||e.authtok,n.authTokenExpires=n.sessionExpires,n.loggedInUserInfo.authToken=n.authToken,n.loggedInUserInfo.authTokenExpires=e.expires,n.authTokenWasValidated=!0,e.refresh_token&&(n.refreshToken=e.refresh_token,n.refreshTokenExpires=e.expires),c(n.SESSION_USERINFO,n.loggedInUserInfo)}else t=!1;return t}function Z(e){(function(e){let t=!1,r=null;if(o(e)&&o(e=J(n.SESSION_COOKIE))){const t=j();void 0!==t.authtok&&(e=t.authtok),o(e)&&(r=f(n.SESSION_USERINFO),null!=r&&r.authToken&&(e=r.authToken))}return o(e)||(null==r&&(r=JSON.parse(J(n.SESSION_USERINFO)),null==r&&(r=f(n.SESSION_USERINFO))),null!=r?(n.authToken=e,n.authTokenExpires=null,n.authTokenWasValidated=!0,n.isUserLoggedIn=Math.floor(r.user_id)>0,n.loggedInUserInfo=r,n.networkId=Math.floor(r.network_id),t=!0):s("restoreUserFromAuthToken valid token but no cached user "+e)),t})(e)||ee(),n.isUserLoggedIn||re()}function ee(){let e=f(n.SESSION_USERINFO);if(null==e&&(e=J(n.SESSION_USERINFO),null!=e))try{e=JSON.parse(e)}catch(n){e=null,Y()}if(null!=e){const t=N({siteId:n.siteId,userId:e.userId,userName:e.userName,siteUserId:e.siteUserId||"",networkId:e.networkId||1,accessLevel:e.accessLevel,siteKey:n.developerKey});t!=e.cr&&s("restoreUserSessionInfo hash does not match. From server: "+e.cr+". Computed here: "+t),n.loggedInUserInfo=e,o(e.session_id)&&s("*** enginesis.restoreUserSessionInfo unexpected server response from "+JSON.stringify(e)),n.networkId=e.network_id,n.sessionId=e.session_id,n.sessionExpires=e.session_expires,n.authToken=e.authToken,n.authTokenExpires=e.session_expires,n.authTokenWasValidated=!0,n.refreshToken=e.refresh_token,n.refreshTokenExpires=e.expires,n.isUserLoggedIn=le()}else n.isUserLoggedIn&&(n.isUserLoggedIn=le(),s("enginesis.restoreUserSessionInfo we think the user is logged in but wasn't cached"));return n.isUserLoggedIn}function ne(e){if(!o(e)){var t={refreshToken:e,timestamp:(new Date).getTime()};c(n.refreshTokenStorageKey,t)}}function te(){var e=n.refreshToken;return o(e)&&(ee(),o(e=n.refreshToken)&&(e=null)),e}function se(){return{dateCreated:new Date,dateLastVisit:new Date,subscriberEmail:"",userId:0,userName:"",favoriteGames:null,gamesPlayed:new Set,cr:""}}function re(){null==n.anonymousUser&&(n.anonymousUser=f(n.anonymousUserKey),null==n.anonymousUser?n.anonymousUser=se():((n.anonymousUser.cr||"")!=ie()&&(n.anonymousUser=se()),Array.isArray(n.anonymousUser.favoriteGames)&&(n.favoriteGames=new Set(n.anonymousUser.favoriteGames),n.anonymousUser.favoriteGames=null),Array.isArray(n.anonymousUser.gamesPlayed)&&(n.anonymousUser.gamesPlayed=new Set(n.anonymousUser.gamesPlayed))));return n.anonymousUser}function oe(){if(null!=n.anonymousUser){var e=n.anonymousUser;e.favoriteGames=Array.from(n.favoriteGames),e.gamesPlayed=Array.from(e.gamesPlayed),e.cr=ie(),c(n.anonymousUserKey,e),e.favoriteGames=null,e.gamesPlayed=new Set(e.gamesPlayed)}}function ie(){var e=n.anonymousUser;return I(e.subscriberEmail+e.userId+e.userName+n.developerKey)}function ae(e){let n;return n="string"!=typeof e?JSON.stringify(e):e,encodeURIComponent(n)}function ue(e,t,s,r,o,i,a,u){return new Promise((function(d,c){let l;l="string"!=typeof i?JSON.stringify(i):i,u||(u=n.sessionId),async function(e,n){return new Promise((function(t,s){const r="AES-CBC";window.crypto.subtle.importKey("raw",v(n),{name:r},!0,["encrypt","decrypt"]).then((function(o){const i=new TextEncoder;window.crypto.subtle.encrypt({name:r,iv:v(n.substring(3,19))},o,i.encode(e)).then((function(e){var n;t((n=e,window.btoa(String.fromCharCode.apply(null,new Uint8Array(n)))))})).catch((function(e){s(e)}))})).catch((function(e){s(e)}))}))}(`site_id=${e}&user_id=${t}&game_id=${s}&level_id=${r}&score=${o}&time_played=${a}&game_data=${l}`,u).then((function(e){e?d(e):c(new Error("Internal data encryption failed, verify your session is good."))})).catch((function(e){c(e)}))}))}function de(e,t,s){return new Promise((function(r,o){null==n.assetUploadQueue&&(n.assetUploadQueue=[]);let i="",a="";const u={target:e,token:null,uploadId:0,fileName:t,fileSize:s.length,serverURL:"",uploadTime:Date.now()},d={site_id:n.siteId,action:"request",target:u.target,file:u.fileName,size:u.fileSize,game_id:n.gameId},c={method:"POST",mode:"cors",credentials:"same-origin",cache:"default",headers:P(),body:K(d)};fetch(n.siteResources.assetUploadURL,c).then((function(e){if(e&&e.ok){const o=e.headers.get("content-type");o&&o.includes("application/json")?e.json().then((function(e){null!=e?e.status&&"1"==e.status.success&&e.results?(u.token=e.results.token,u.uploadId=e.results.id,n.assetUploadQueue.push(u),function(e,t){return new Promise((function(s,r){const o={site_id:n.siteId,game_id:n.gameId,action:"upload",target:e.target,file:e.fileName,size:e.fileSize,token:e.token,id:e.uploadId,image:t},i={method:"POST",mode:"cors",credentials:"same-origin",cache:"default",headers:P(),body:K(o)};let a="",u="";fetch(n.siteResources.assetUploadURL,i).then((function(e){if(e&&e.ok){var n=e.headers.get("content-type");n&&n.includes("application/json")?e.json().then((function(e){null!=e?e.status&&"1"==e.status.success?s(e):(a=e.status.message,u=e.status.extended_info):(a="SERVICE_ERROR",u="There was a service error during the upload operation. The support team has been notified."),""!=a&&r(_(a,u,o))})).catch((function(e){a="SERVICE_ERROR",u=e.toString(),r(_(a,u,o))})):(a="SERVICE_ERROR",u="Unexpected response received from service when requesting upload token.")}else a="SERVICE_ERROR",u="Error received from service when requesting upload token.";""!=a&&r(_(a,u,o))}),(function(e){u="Network error from service when requesting token. "+e.toString(),r(_("SERVICE_ERROR",u,o))})).catch((function(e){u="Unexpected response received from service when requesting token with "+e.toString()+".",r(_("SERVICE_ERROR",u,o))}))}))}(u,s).then((function(e){r(e)}),(function(e){r(e)})).catch((function(e){a="SERVICE_ERROR",i="Error: "+e.toString()+" Received from service with "+t+" with size "+u.fileSize+"."}))):(a="SERVICE_ERROR",i="Error: "+e.status.extended_info+" Received from service with "+t+" with size "+u.fileSize+"."):(a="SERVICE_ERROR",i="There was a service error during the upload operation. The support team has been notified.")})).catch((function(e){a="SERVICE_ERROR",i="Unexpected response received from service: "+e.toString()})):(a="SERVICE_ERROR",i="Unexpected response received from service when requesting upload token.")}else a="SERVICE_ERROR",i="Error received from service when requesting upload token.";""!=a&&o(_(a,i,d))}),(function(e){a="SERVICE_ERROR",i="Network error from service when requesting token. "+e.toString(),o(_(a,i,d))})).catch((function(e){a="SERVICE_ERROR",i="Unexpected response received from service when requesting token with "+e.toString()+".",o(_(a,i,d))}))}))}async function ce(e,n){return new Promise((function(t,s){const r="AES-CBC";window.crypto.subtle.importKey("raw",v(n),{name:r},!0,["encrypt","decrypt"]).then((function(o){var i;window.crypto.subtle.decrypt({name:r,iv:v(n.substring(3,19))},o,(i=e,Uint8Array.from(atob(i),(function(e){return e.charCodeAt(0)})))).then((function(e){const n=(new TextDecoder).decode(e);t(n)})).catch((function(e){s(e)}))})).catch((function(e){s(e)}))}))}function le(){return n.isUserLoggedIn=n.loggedInUserInfo&&Math.floor(n.loggedInUserInfo.user_id)>0&&""!=n.authToken&&n.authTokenWasValidated,n.isUserLoggedIn}const fe={init:function(e){let s=null;var i;return t=this,E(),e&&(n.siteId=void 0!==e.siteId?e.siteId:0,n.gameId=void 0!==e.gameId?e.gameId:0,n.gameKey=void 0!==e.gameKey?e.gameKey:"",n.gameGroupId=void 0!==e.gameGroupId?e.gameGroupId:0,n.languageCode=(o(i=e.languageCode)?i="en":i.length>2&&(i=i.substring(0,2)),i),n.serverStage=void 0!==e.serverStage?e.serverStage:"*",n.developerKey=void 0!==e.developerKey?e.developerKey:"",n.callBackFunction=void 0!==e.callBackFunction?e.callBackFunction:null,s=void 0!==e.authToken?e.authToken:null),$(),n.isBrowserBuild&&!n.isNodeBuild?n.useHTTPS="https:"==window.location.protocol:n.useHTTPS=!0,n.useHTTPS,z(n.serverStage),Z(s),A()&&(n.isBrowserBuild?window.setTimeout(M,500):setTimeout(M,500)),r()},md5:function(e){return I(e)},request:function(e,n){return"object"==typeof e&&"string"==typeof e.fn&&(e=(n=e).fn),B(e,n,null)},versionGet:function(){return n.VERSION},isUserLoggedIn:function(){return le()},userIdGet:function(){return n.isUserLoggedIn?Math.floor(n.loggedInUserInfo.user_id):0},sessionIdGet:function(){return n.sessionId},sessionGet:function(){return{sessionId:n.sessionId,sessionExpires:n.sessionExpires}},isEnginesisResult:function(e){return e&&e.hasOwnProperty("results")&&e.results.hasOwnProperty("status")&&e.results.status.hasOwnProperty("success")},getLastResponse:function(){return n.lastResponse?n.lastResponse.status:_("","",{})},isError:function(e){return!g(e)},toError:function(e){var n=null,t=null,s="";return e&&(e.status?t=e.status:e.results&&e.results.status&&(t=e.results.status)),null==t&&(t={message:"INVALID_PARAMETER",extended_info:"Result was not a valid result object."}),s=t.extended_info?t.extended_info:t.message,(n=new Error(s)).code=t.message,n},toErrorString:function(e){var n="";return e&&e.results&&e.results.status&&(n+=e.results.status.message,e.results.status.extended_info&&(n+=": "+e.results.status.extended_info)),n},error:function(e){return m(e)},makeErrorResponse:function(e,n,t,s,r){return V(e,n,t,s,r)},resultToString:function(e){return g(e)?e.results.passthru.fn:e.results.status.message+(e.results.status.extended_info?": "+e.results.status.extended_info:"")},pause:function(){n.isPaused=!0},resume:function(){n.isPaused=!1,t.sessionRefreshIfExpired().then((function(e){s("Session was "+(e?"refreshed":"OK"))})).catch((function(e){s("Session sessionRefreshIfExpired exception "+e.toString())}))},getLoggedInUserInfo:function(){if(n.isUserLoggedIn){var e={};for(var t in n.loggedInUserInfo)n.loggedInUserInfo.hasOwnProperty(t)&&(e[t]=n.loggedInUserInfo[t]);return e}return null},isTouchDevice:function(){return n.isTouchDeviceFlag},queryStringToObject:j,setNodeRequest:function(e){n.nodeRequest=e},isValidUserName:function(e){let n;return n="string"==typeof e&&(e.length==e.trim().length&&null!==e.match(/^[a-zA-Z0-9_@!~\$\.\-\|\s]{3,20}$/)),n},cleanUserName:function(e){let n="";return"string"==typeof e&&(n=e.replace(/[^a-zA-Z0-9_@!~\$\.\-\|\s]/g,""),n=n.trim().replace(/\s+/," ")),n},isValidPassword:function(e){let n;return n="string"==typeof e&&(e.length==e.trim().length&&null!==e.match(/^[ -~]{8,32}$/)),n},validateGender:function(e){return function(e){let n;return o(e)?n="N":(n=e.trim().toUpperCase(),n="M"==n[0]?"M":"F"==n[0]?"F":"N"),n}(e)},saveRefreshToken:function(e){ne(e)},getRefreshToken:function(){return te()},serverStageSet:function(e){return z(e)},serverStageGet:function(){return n.serverStage},setHTTPS:function(e){return n.useHTTPS=void 0===e||a(e),n.useHTTPS},isHTTPS:function(){return n.useHTTPS},getProtocol:function(){return Q()},serverBaseUrlGet:function(){return n.serverHost},getSiteSpecificURLs:function(){var e,t=n.siteResources;return null!=t.profileURL&&t.profileURL.length>0?{root:e=Q()+t.baseURL,forgotPassword:e+t.forgotPasswordURL,login:e+t.loginURL,play:e+t.playURL,privacy:e+t.privacyURL,profile:e+t.profileURL,register:e+t.registerURL,terms:e+t.termsURL}:{root:e=Q()+"varyn"+n.serverStage+".com",forgotPassword:e+"/procs/forgotpass.php",login:e+"/profile/",play:e+"/play/",privacy:e+"/privacy/",profile:e+"/profile/",register:e+"/profile/?action=signup",terms:e+"/tos/"}},gameIdGet:function(){return n.gameId},gameIdSet:function(e,t){return n.gameId!=e&&(n.gameInfo=null),n.gameKey=t||"",n.gameId=e},gameInfoGet:function(){return n.gameInfo},gameGroupIdGet:function(){return n.gameGroupId},gameGroupIdSet:function(e){return n.gameGroupId=e},siteIdGet:function(){return n.siteId},supportedSSONetworks:function(){return n.supportedNetworks},getGameImageURL:function(e){const t="enginesisTestGame";let s=null,r=0,i=0,a=null,u=Q()+n.serverHost+"/games/";return void 0!==e&&null!=e&&(o(e.game_name)?o(e.gameName)||(s=e.gameName):s=e.game_name,o(e.format)||(a=e.format),void 0!==e.width&&(r=e.width),void 0!==e.height&&(i=e.height)),o(s)&&(s=null!=n.gameInfo&&n.gameInfo.game_name||t),"quiz"!=s&&"quiz_"!=s.substring(0,5)||(s="quiz/"+(e.game_id||n.gameInfo.game_id)),u+=s+"/images/",(o(r)||"*"==r)&&(r=600),(o(i)||"*"==i)&&(i=450),u+=r==i?r.toString():r+"x"+i,o(a)?a="png":("."==a[0]&&(a=a.substring(1)),a.match(/(png|jpg|svg|webp)/i)||(a="png")),u+="."+a,u},getDateNow:function(){return(new Date).toISOString().slice(0,19).replace("T"," ")},restoreOnline:function(){return M()},sessionBegin:function(e,s,i){const a="SessionBegin";if(!r())return q(a,{},"VALIDATION_FAILED","The internal system is not in the proper operational state.",i);let u=0;n.isUserLoggedIn||(W(n.anonymousUserKey,n.anonymousUser,86400,"/","",!0),u=n.anonymousUser.userId),n.gameId=o(s)?t.gameIdGet():s,n.gameKey=o(e)?n.gameKey:e;return B(a,{game_id:n.gameId,gamekey:n.gameKey,site_mark:u},i)},sessionRefresh:function(e,t){const s="SessionRefresh";if(o(e)&&o(e=te()))return q(s,{},"NOT_LOGGED_IN","The requested service requires a logged in user.",t);let r=0;n.isUserLoggedIn||(r=n.anonymousUser.userId);return B(s,{refresh_token:e,game_id:n.gameId,gamekey:n.gameKey,site_mark:r},t)},sessionRefreshIfExpired:function(){return new Promise((function(e,r){const o=n.loggedInUserInfo,i=f(n.SESSION_COOKIE);let a,u=!1;if(null!=i){a=i.sessionExpires?new Date(i.sessionExpires):new Date;const d=6e4*a.getTimezoneOffset(),c=Date.now().valueOf()>a.valueOf()-d,l=N({siteId:n.siteId,userId:o.user_id,userName:o.user_name,siteUserId:o.site_user_id||"",networkId:o.network_id||1,accessLevel:o.access_level,siteKey:n.developerKey}),f=l==i.cr&&Math.floor(o.user_id)==Math.floor(i.user_id);if(!c&&f)u=!0,e(u);else if(c)s("verifyUserSessionInfo Session expired but we think we can refresh it."),t.sessionRefresh(te(),null).then((function(){u=!0,e(u)}),(function(e){r(e)})).catch((function(e){r(e)}));else{const e="Session hash does not match but session not expired.";s("verifyUserSessionInfo "+e+" from cache: "+i.cr+". Computed here: "+l),r(new Error(e))}}else e(u)}))},voteForURIUnauth:function(e,n,t,s,r){return B("VoteForURIUnauth",{uri:e,vote_group_uri:n,vote_value:t,security_key:s},r)},voteCountPerURIGroup:function(e,n){return B("VoteCountPerURIGroup",{vote_group_uri:e},n)},developerGet:function(e,n){return B("DeveloperGet",{developer_id:e},n)},gameDataGet:function(e,n){return B("GameDataGet",{game_data_id:e},n)},gameDataCreate:function(e,n,t,s,r,o,i,a,u,d,c){return B("GameDataCreate",{from_address:e,from_name:n,to_address:t,to_name:s,user_msg:r,user_files:o,game_data:ae(i),name_tag:a,add_to_gallery:u?1:0,last_score:d},c)},sendToFriend:function(e,t){const r="GameDataCreate";let i="";if(n.authTokenWasValidated&&0!=Math.floor(n.loggedInUserInfo.user_id)||!o(e.from_address)&&!o(e.from_name)?o(n.gameId)&&(i="INVALID_GAME_ID"):i="INVALID_PARAMETER",""==i){const n={from_address:e.from_address||"",from_name:e.from_name||"",to_address:e.to_address||"",to_name:e.to_name||"User",user_msg:e.user_message||"",user_files:"",game_data:ae(e.game_data)||"",name_tag:e.name_tag||"",add_to_gallery:e.add_to_gallery||0,last_score:e.last_score||0};return e.game_image?new Promise((function(o){de("gameshare","game_image.png",e.game_image).then((function(e){e.status&&"1"==e.status.success&&(n.user_files=e.results.path+e.results.file),B(r,n,t).then((function(e){o(e)}))}),(function(e){s("SendToFriend error "+e.toString()+" while uploading image, continuing anyway."),B(r,n,t).then((function(e){o(e)}))})).catch((function(e){s("SendToFriend exception "+e.toString()+" while uploading image, continuing anyway."),B(r,n,t).then((function(e){o(e)}))}))})):B(r,n,t)}return q(r,{game_id:n.gameId,from_address:e.from_address,from_name:e.from_name},i,"Error "+i+" encountered while processing send to friend.",t)},gameConfigGet:function(e,n,s,r,i){return void 0===e&&(e=0),void 0!==n&&0!=n||(n=t.gameIdGet()),o(r)&&(r=t.getDateNow()),void 0===s&&(s=1),B("GameConfigGet",{game_config_id:e,game_id:n,category:s,air_date:r},i)},gameTrackingRecord:function(e,r,o,a,u){if(n.isBrowserBuild){const u=t.gameIdGet().toString();try{i(r)&&(r=u),i(o)&&(o=""),i(a)&&(a=""),n.isBrowserBuild&&(null!=window.dataLayer?window.dataLayer.push({event:e,gameid:u,action:r,label:o,value:a}):null!=window.ga&&window.ga("send","event",e,r,o,a))}catch(e){s("Analytics exception "+e.toString())}}return B("GameTrackingRecord",{hit_type:"game_event",hit_category:e,hit_action:r,hit_label:o,hit_data:a},u)},gameFind:function(e,n){return B("GameFind",{game_name_part:e},n)},gameFindByName:function(e,n){return B("GameFindByName",{game_name:e},n)},gameGet:function(e,n){return B("GameGet",{game_id:e},n)},gameGetByName:function(e,n){return B("GameGetByName",{game_name:e},n)},gameListByCategory:function(e,n,t){return B("GameListByCategory",{num_items_per_category:e,game_status_id:n},t)},gameListList:function(e){return B("GameListList",{},e)},gameListListGames:function(e,n){return B("GameListListGames",{game_list_id:e},n)},gameListListGamesByName:function(e,n){return B("GameListListGamesByName",{game_list_name:e},n)},gameListByMostPopular:function(e,n,t,s,r){return B("GameListByMostPopular",{start_date:e,end_date:n,start_item:t,num_items:s},r)},gameListByIdList:function(e,n,t){return B("GameListByIdList",{game_id_list:e,delimiter:n},t)},gameListCategoryList:function(e){return B("GameListCategoryList",{},e)},gameListListRecommendedGames:function(e,n){return B("GameListListRecommendedGames",{game_list_id:e},n)},gamePlayEventListByMostPlayed:function(e,n,t,s){return B("GamePlayEventListByMostPlayed",{start_date:e,end_date:n,num_items:t},s)},gameRatingGet:function(e,n){return B("GameRatingGet",{game_id:e},n)},gameRatingList:function(e,n,t){return B("GameRatingList",{game_id:e,num_items:n},t)},gameRatingUpdate:function(e,n,t){return B("GameRatingUpdate",{game_id:e,rating:n},t)},scoreSubmitUnauth:function(e,t,s,r,o,i,a){return B("ScoreSubmitUnauth",{game_id:e,session_id:n.sessionId,user_name:t,score:s,game_data:ae(r),time_played:o,user_source:i},a)},decryptServerPayload:function(e){return new Promise((function(t,s){const r=n.sessionId;ce(e.replace(/-/g,"+").replace(/_/g,"/").replace(/~/g,"="),r).then((function(e){e?t(e):s(new Error("Not able to decrypt payload from service, verify your session agrees with the server."))})).catch((function(e){s(e)}))}))},scoreSubmit:function(e,t,s,r,i,a){return new Promise((function(u){const d="ScoreSubmit",c=n.sessionId;let l="";function f(o,c){b(V(d,0,o,c,{game_id:e,level_id:s,score:t,game_data:r,time_played:i}),u,a,n.callBackFunction)}n.authTokenWasValidated&&0!=Math.floor(n.loggedInUserInfo.user_id)?null==c?l="INVALID_SESSION":o(e)&&o(e=n.gameId)&&(l="INVALID_GAME_ID"):l="NOT_LOGGED_IN",""==l?ue(n.siteId,n.loggedInUserInfo.user_id,e,s,t,r,i,c).then((function(e){var n;e?B(d,{data:(n=e,n.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"~"))},a).then((function(e){u(e)})).catch((function(e){f("SYSTEM_ERROR","Exception encountered while exchanging score with server: "+e.toString())})):f("SYSTEM_ERROR","System error encountered while processing score submit.")})).catch((function(e){f("INVALID_PARAMETER","Exception encountered while processing score submit: "+e.toString())})):f(l,"Error encountered while processing score submit.")}))},scoreRankList:function(e,t,s,r,i,a,u){o(e)&&(e=n.gameId),o(s)&&(s=0),o(r)&&(r=0),o(i)&&(i=1),o(a)&&(a=100);return B("ScoreRankList",{game_id:e,level_id:t,time_period_type:s,time_period:r,start_rank:i,num_ranks:a},u)},newsletterCategoryList:function(e){return B("NewsletterCategoryList",{},e)},newsletterAddressAssign:function(e,n,t,s,r){return B("NewsletterAddressAssign",{email_address:e,user_name:n,company_name:t,categories:s,delimiter:","},r)},newsletterAddressUpdate:function(e,n,t,s,r,o){return B("NewsletterAddressUpdate",{newsletter_address_id:e,email_address:n,user_name:t,company_name:s,active:r},o)},newsletterAddressDelete:function(e,n){return B("NewsletterAddressDelete",{email_address:e,newsletter_address_id:"NULL"},n)},newsletterAddressGet:function(e,n){return B("NewsletterAddressGet",{email_address:e},n)},promotionItemList:function(e,n,t){return B("PromotionItemList",{promotion_id:e,query_date:n},t)},promotionList:function(e,n,t,s){return B("PromotionItemList",{promotion_id:e,query_date:n,show_items:t},s)},recommendedGameList:function(e,n){return B("RecommendedGameList",{game_id:e},n)},registeredUserCreate:function(e,t,s,r,i,a,u,d,c,l,f,g,m,_,p,h,v,I,y,U,w,R,S,E,k){return B("RegisteredUserCreate",{site_id:n.siteId,captcha_id:o(S)?n.captchaId:S,captcha_response:o(E)?n.captchaResponse:E,user_name:e,site_user_id:_,network_id:p,real_name:r,password:t,dob:i,gender:a,city:u,state:d,zipcode:c,email_address:s,country_code:l,mobile_number:f,im_id:g,agreement:h,security_question_id:1,security_answer:"",img_url:"",about_me:U,tagline:m,additional_info:w,source_site_id:R},k)},registeredUserUpdate:function(e,t,s,r,i,a,u,d,c,l,f,g,m,_,p,h,v,I,y,U,w,R,S,E,k){return B("RegisteredUserUpdate",{site_id:n.siteId,captcha_id:o(S)?n.captchaId:S,captcha_response:o(E)?n.captchaResponse:E,user_name:e,real_name:r,dob:i,gender:a,city:u,state:d,zipcode:c,email_address:s,country_code:l,mobile_number:f,im_id:g,img_url:"",about_me:U,tagline:m,additional_info:w},k)},registeredUserSecurityUpdate:function(e,t,s,r,i,a){return B("RegisteredUserSecurityUpdate",{site_id:n.siteId,captcha_id:o(e)?n.captchaId:e,captcha_response:o(t)?n.captchaResponse:t,security_question_id:s,security_question:r,security_answer:i},a)},registeredUserConfirm:function(e,n,t){return B("RegisteredUserConfirm",{user_id:e,secondary_password:n},t)},registeredUserForgotPassword:function(e,n,t){return B("RegisteredUserForgotPassword",{user_name:e,email:n},t)},registeredUserResetSecondaryPassword:function(e,n,t,s,r){return B("RegisteredUserResetSecondaryPassword",{user_id:e,user_name:n,email_address:t,secondary_password:s},r)},registeredUserRequestPasswordChange:function(e){return B("RegisteredUserRequestPasswordChange",{site_id:n.siteId},e)},registeredUserPasswordChange:function(e,t,s,r,i){return B("RegisteredUserPasswordChange",{site_id:n.siteId,captcha_id:o(e)?n.captchaId:e,captcha_response:o(t)?n.captchaResponse:t,password:s,secondary_password:r},i)},registeredUserSecurityGet:function(e){return B("RegisteredUserSecurityGet",{site_id:n.siteId,site_user_id:""},e)},registeredUserGet:function(e,n,t,s){return B("RegisteredUserGet",{get_user_id:e,site_user_id:n,network_id:t},s)},siteListGames:function(e,n,t,s){return(null==e||e<0)&&(e=1),(null==n||n>500)&&(n=500),(null==t||t>3)&&(t=2),B("SiteListGames",{start_item:e,num_items:n,game_status_id:t},s)},siteListGamesRandom:function(e,n){return(null==e||e>500)&&(e=500),B("SiteListGamesRandom",{num_items:e},n)},userGetByName:function(e,n){return B("UserGetByName",{user_name:e},n)},userLogout:function(e){return B("UserLogout",{},e)},userLogin:function(e,n,t){return B("UserLogin",{user_name:e,password:n},t)},userLoginCoreg:function(e,n,t){return void 0!==e.siteUserId&&0!=e.siteUserId.length&&((void 0!==e.userName&&0!=e.userName.length||void 0!==e.realName&&0!=e.realName.length)&&(void 0===e.userName&&(e.userName=""),void 0===e.realName&&(e.realName=""),(void 0===e.gender||0==e.gender.length||"M"!=e.gender&&"F"!=e.gender&&"U"!=e.gender)&&(e.gender="U"),void 0===e.emailAddress&&(e.emailAddress=""),void 0===e.scope&&(e.scope=""),void 0===e.agreement&&(e.agreement="0"),void 0===e.idToken&&(e.idToken=""),void 0===e.avatarURL&&(e.avatarURL=""),void 0===e.dob||0==e.dob.length?(e.dob=new Date,e.dob=e.dob.toISOString().slice(0,9)):e.dob instanceof Date&&(e.dob=e.dob.toISOString().slice(0,9)),B("UserLoginCoreg",{site_user_id:e.siteUserId,user_name:e.userName,real_name:e.realName,email_address:e.emailAddress,gender:e.gender,dob:e.dob,network_id:n,scope:e.scope,agreement:e.agreement,avatar_url:e.avatarURL,id_token:e.idToken},t)))},avatarURL:function(e,t){return 0==t&&(t=n.loggedInUserInfo?n.loggedInUserInfo.user_id:0),e<0?e=0:e>2&&(e=2),n.siteResources.avatarImageURL+"?site_id="+n.siteId+"&user_id="+t+"&size="+e},quizGet:function(e,n){return B("QuizGet",{game_id:e},n)},quizPlay:function(e,n,t){return B("QuizPlay",{game_id:e,game_group_id:n},t)},quizPlayScheduled:function(e,n,t){return B("QuizPlayScheduled",{game_id:e,game_group_id:n},t)},quizOutcomesCountList:function(e,n,t){return B("QuizOutcomesCountList",{game_id:e,game_group_id:n},t)},quizSubmit:function(e,n,t){return B("QuizSubmit",{game_id:e,results:n},t)},quizQuestionPlayed:function(e,n,t,s){return B("QuizQuestionPlayed",{game_id:e,question_id:n,choice_id:t},s)},isUserFavoriteGame:function(e,s){const r=parseInt(e,10)||n.gameId,o=n.favoriteGames.has(r);return"function"==typeof s&&n.favoriteGamesNextCheck<Date.now()&&t.userFavoriteGamesList().then((function(e){s(r,n.favoriteGames.has(r))})),o},userFavoriteGamesList:function(e){return n.favoriteGamesNextCheck=Date.now()+6e4,B("UserFavoriteGamesList",{},e)},userFavoriteGamesAssign:function(e,t){const s="UserFavoriteGamesAssign",r=e||n.gameId,o={game_id:r};if(n.favoriteGames.add(r),n.isUserLoggedIn)return B(s,o,t);{const e="NOT_AUTHENTICATED",n="You must log in to update your favorite games.";return oe(),q(s,o,e,n,t)}},userFavoriteGamesAssignList:function(e,t){for(var s=e.split(","),r=0;r<s.length;r++)n.favoriteGames.add(s[r]);const o="UserFavoriteGamesAssignList",i={game_id_list:e,delimiter:","};if(n.isUserLoggedIn)return B(o,i,t);{const e="NOT_AUTHENTICATED",n="You must log in to update your favorite games.";return oe(),q(o,i,e,n,t)}},userFavoriteGamesUnassign:function(e,t){const s=e||n.gameId,r="UserFavoriteGamesUnassign",o={game_id:s};if(n.favoriteGames.delete(s),n.isUserLoggedIn)return B(r,o,t);{const e="NOT_AUTHENTICATED",n="You must log in to update your favorite games.";return oe(),q(r,o,e,n,t)}},userFavoriteGamesUnassignList:function(e,t){for(var s=e.split(","),r=0;r<s.length;r++)n.favoriteGames.delete(s[r]);const o="UserFavoriteGamesUnassignList",i={game_id_list:e,delimiter:","};if(n.isUserLoggedIn)return B(o,i,t);{const e="NOT_AUTHENTICATED",n="You must log in to update your favorite games.";return oe(),q(o,i,e,n,t)}},userFavoriteGamesMove:function(e,n,t){return B("UserFavoriteGamesMove",{game_id:e,sort_order:n},t)},anonymousUserSetDateLastVisit:function(){null==n.anonymousUser&&re(),n.anonymousUser.dateLastVisit=new Date},anonymousUserSetSubscriberEmail:function(e,t){var s;null==n.anonymousUser&&re(),void 0===t&&(t=!0),s=n.anonymousUser.subscriberEmail,(t&&e!=s||!t&&o(s))&&(n.anonymousUser.subscriberEmail=e,oe())},anonymousUserGetSubscriberEmail:function(){return null==n.anonymousUser&&re(),n.anonymousUser.subscriberEmail},anonymousUserSetUserName:function(e,t){var s;null==n.anonymousUser&&re(),void 0===t&&(t=!0),s=n.anonymousUser.userName,(t&&e!=s||!t&&o(s))&&(n.anonymousUser.userName=e,oe())},anonymousUserGetUserName:function(){return null==n.anonymousUser&&re(),n.anonymousUser.userName},anonymousUserSetId:function(e){null==n.anonymousUser&&re(),(void 0===n.anonymousUser.userId||n.anonymousUser.userId<1e4)&&(n.anonymousUser.userId=e,oe())},anonymousUserGetId:function(){return null==n.anonymousUser&&re(),n.anonymousUser.userId||0},anonymousUserAddFavoriteGame:function(e){null==n.anonymousUser&&re(),n.anonymousUser.favoriteGames.add(e),oe()},anonymousUserGamePlayed:function(e){null==n.anonymousUser&&re(),n.anonymousUser.gamesPlayed.add(e),oe()},conferenceAssetRootPath:function(e){return"//"+n.serverHost+"/sites/"+n.siteId+"/conf/"+e+"/"},conferenceGet:function(e,n){var t;return parseInt(e,10)>0?t="":(t=e,e=0),B("ConferenceGet",{conference_id:e,visible_id:t},n)},conferenceTopicGet:function(e,n,t){var s;return parseInt(e,10)>0?s="":(s=e,e=0),B("ConferenceTopicGet",{conference_id:e,visible_id:s,conference_topic_id:n},t)},conferenceTopicList:function(e,n,t,s,r,o,i){var a;return parseInt(e,10)>0?a="":(a=e,e=0),B("ConferenceTopicList",{conference_id:e,visible_id:a,tags:n,start_date:t,end_date:s,start_item:r,num_items:o},i)}};if("function"==typeof define&&define.amd)define((function(){return fe}));else if("object"==typeof exports)module.exports=fe;else{var ge=window.enginesis;n.existingEnginesis=function(){return window.enginesis=ge,this},window.enginesis=fe}}();